import{r as u,i as Ve,o as et,k as tt,m as Ne,j as n,n as nt,b as Re,q as ot,s as L,L as at,f as Ie,t as it,c as st,d as rt,A as lt}from"./index-imR5RE01.js";import{B as ct,a as dt}from"./ButtonToolbar-lC3trKt8.js";var ut=function(e){var t=u.useRef(e);t.current=e,Ve(function(){return function(){return t.current()}})};const ft=ut;var mt=function(e){var t=u.useRef(0),i=u.useState(e),a=i[0],o=i[1],c=u.useCallback(function(m){cancelAnimationFrame(t.current),t.current=requestAnimationFrame(function(){o(m)})},[]);return ft(function(){cancelAnimationFrame(t.current)}),[a,c]};const ht=mt;var pt=function(){var e=ht(function(){return{x:Ne?window.pageXOffset:0,y:Ne?window.pageYOffset:0}}),t=e[0],i=e[1];return u.useEffect(function(){var a=function(){i(function(o){var c=window.pageXOffset,m=window.pageYOffset;return o.x!==c||o.y!==m?{x:c,y:m}:o})};return a(),et(window,"scroll",a,{capture:!1,passive:!0}),function(){tt(window,"scroll",a)}},[]),t};const gt=pt;var Ae={},Fe;Object.defineProperty(Ae,"__esModule",{value:!0});var y=n,v=u,l=function(){return l=Object.assign||function(e){for(var t,i=1,a=arguments.length;i<a;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},l.apply(this,arguments)};function ke(e,t,i){if(i||arguments.length===2)for(var a,o=0,c=t.length;o<c;o++)!a&&o in t||(a||(a=Array.prototype.slice.call(t,0,o)),a[o]=t[o]);return e.concat(a||Array.prototype.slice.call(t))}function Se(e){var t=e.size,i=t===void 0?25:t,a=e.SVGstrokeColor,o=a===void 0?"currentColor":a,c=e.SVGstorkeWidth,m=c===void 0?0:c,b=e.SVGclassName,r=b===void 0?"star-svg":b,S=e.SVGstyle;return y.jsx("svg",l({className:r,style:S,stroke:o,fill:"currentColor",strokeWidth:m,viewBox:"0 0 24 24",width:i,height:i,xmlns:"http://www.w3.org/2000/svg"},{children:y.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}))}function vt(e,t){switch(t.type){case"PointerMove":return l(l({},e),{hoverValue:t.payload,hoverIndex:t.index});case"PointerLeave":return l(l({},e),{ratingValue:e.ratingValue,hoverIndex:0,hoverValue:null});case"MouseClick":return l(l({},e),{valueIndex:e.hoverIndex,ratingValue:t.payload});default:return e}}var xt="style-module_starRatingWrap__q-lJC",yt="style-module_simpleStarRating__nWUxf",Ct="style-module_fillIcons__6---A",wt="style-module_emptyIcons__Bg-FZ",jt="style-module_tooltip__tKc3i";function Me(){return typeof window<"u"&&window.matchMedia("(pointer: coarse)").matches||"ontouchstart"in window||typeof navigator<"u"&&navigator.maxTouchPoints>0}(function(e,t){t===void 0&&(t={});var i=t.insertAt;if(e&&typeof document<"u"){var a=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",i==="top"&&a.firstChild?a.insertBefore(o,a.firstChild):a.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}})(".style-module_starRatingWrap__q-lJC{display:inline-block;touch-action:none}.style-module_simpleStarRating__nWUxf{display:inline-block;overflow:hidden;position:relative;touch-action:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle;white-space:nowrap}.style-module_fillIcons__6---A{display:inline-block;overflow:hidden;position:absolute;top:0;white-space:nowrap}.style-module_emptyIcons__Bg-FZ{display:inline-block}.style-module_tooltip__tKc3i{background-color:#333;border-radius:5px;color:#fff;display:inline-block;padding:5px 15px;vertical-align:middle}"),Fe=Ae.Rating=function(e){var t,i,a=e.onClick,o=e.onPointerMove,c=e.onPointerEnter,m=e.onPointerLeave,b=e.initialValue,r=b===void 0?0:b,S=e.iconsCount,h=S===void 0?5:S,G=e.size,A=G===void 0?40:G,M=e.readonly,w=M!==void 0&&M,P=e.rtl,N=P!==void 0&&P,V=e.customIcons,E=V===void 0?[]:V,p=e.allowFraction,C=p!==void 0&&p,B=e.style,f=e.className,k=f===void 0?"react-simple-star-rating":f,Z=e.transition,Le=Z!==void 0&&Z,q=e.allowHover,U=q===void 0||q,J=e.disableFillHover,X=J!==void 0&&J,Y=e.fillIcon,Ge=Y===void 0?null:Y,$=e.fillColor,Pe=$===void 0?"#ffbc0b":$,K=e.fillColorArray,Ee=K===void 0?[]:K,Be=e.fillStyle,Q=e.fillClassName,We=Q===void 0?"filled-icons":Q,D=e.emptyIcon,Oe=D===void 0?null:D,ee=e.emptyColor,Te=ee===void 0?"#cccccc":ee,He=e.emptyStyle,te=e.emptyClassName,ze=te===void 0?"empty-icons":te,ne=e.allowTitleTag,Ze=ne===void 0||ne,oe=e.showTooltip,qe=oe!==void 0&&oe,ae=e.tooltipDefaultText,Ue=ae===void 0?"Your Rate":ae,ie=e.tooltipArray,W=ie===void 0?[]:ie,Je=e.tooltipStyle,se=e.tooltipClassName,Xe=se===void 0?"react-simple-star-rating-tooltip":se,re=e.SVGclassName,le=re===void 0?"star-svg":re,ce=e.titleSeparator,Ye=ce===void 0?"out of":ce,de=e.SVGstyle,ue=e.SVGstorkeWidth,fe=ue===void 0?0:ue,me=e.SVGstrokeColor,he=me===void 0?"currentColor":me,pe=v.useReducer(vt,{hoverIndex:0,valueIndex:0,ratingValue:r,hoverValue:null}),O=pe[0],g=O.ratingValue,d=O.hoverValue,z=O.hoverIndex,ge=O.valueIndex,T=pe[1];v.useEffect(function(){r&&T({type:"MouseClick",payload:0})},[r]);var j=v.useMemo(function(){return C?2*h:h},[C,h]),R=v.useMemo(function(){return r>j?0:C||Math.floor(r)===r?Math.round(r/h*100):2*Math.ceil(r)*10},[C,r,h,j]),ve=v.useMemo(function(){return(C?2*r-1:r-1)||0},[C,r]),I=v.useCallback(function(s){return h%2!=0?s/2/10:s*h/100},[h]),xe=function(s){for(var _=s.clientX,x=s.currentTarget.children[0].getBoundingClientRect(),Ke=x.left,Qe=x.right,De=x.width,je=N?Qe-_:_-Ke,H=j,_e=Math.round(De/j),F=0;F<=j;F+=1)if(je<=_e*F){H=F===0&&je<_e?0:F;break}var be=H-1;H>0&&(T({type:"PointerMove",payload:100*H/j,index:be}),o&&d&&o(I(d),be,s))},ye=function(s){d&&(T({type:"MouseClick",payload:d}),a&&a(I(d),z,s))},$e=v.useMemo(function(){if(U){if(X){var s=g&&g||R;return d&&d>s?d:s}return d&&d||g&&g||R}return g&&g||R},[U,X,d,g,R]);v.useEffect(function(){W.length>j&&console.error("tooltipArray Array length is bigger then Icons Count length.")},[W.length,j]);var Ce=v.useCallback(function(s){return d&&s[z]||g&&s[ge]||r&&s[ve]},[d,z,g,ge,r,ve]),we=v.useMemo(function(){return d&&I(d)||g&&I(g)||r&&I(R)},[d,I,g,r,R]);return y.jsxs("span",l({className:xt,style:{direction:"".concat(N?"rtl":"ltr")}},{children:[y.jsxs("span",l({className:"".concat(yt," ").concat(k),style:l({cursor:w?"":"pointer"},B),onPointerMove:w?void 0:xe,onPointerEnter:w?void 0:function(s){c&&c(s),Me()&&xe(s)},onPointerLeave:w?void 0:function(s){Me()&&ye(),T({type:"PointerLeave"}),m&&m(s)},onClick:w?void 0:ye,"aria-hidden":"true"},{children:[y.jsx("span",l({className:"".concat(wt," ").concat(ze),style:l({color:Te},He)},{children:ke([],Array(h),!0).map(function(s,_){var x;return y.jsx(v.Fragment,{children:((x=E[_])===null||x===void 0?void 0:x.icon)||Oe||y.jsx(Se,{SVGclassName:le,SVGstyle:de,SVGstorkeWidth:fe,SVGstrokeColor:he,size:A})},_)})})),y.jsx("span",l({className:"".concat(Ct," ").concat(We),style:l((t={},t[N?"right":"left"]=0,t.color=Ce(Ee)||Pe,t.transition=Le?"width .2s ease, color .2s ease":"",t.width="".concat($e,"%"),t),Be),title:Ze?"".concat(we," ").concat(Ye," ").concat(h):void 0},{children:ke([],Array(h),!0).map(function(s,_){var x;return y.jsx(v.Fragment,{children:((x=E[_])===null||x===void 0?void 0:x.icon)||Ge||y.jsx(Se,{SVGclassName:le,SVGstyle:de,SVGstorkeWidth:fe,SVGstrokeColor:he,size:A})},_)})}))]})),qe&&y.jsx("span",l({className:"".concat(jt," ").concat(Xe),style:l((i={},i[N?"marginRight":"marginLeft"]=20,i),Je)},{children:(W.length>0?Ce(W):we)||Ue}))]}))};const _t="data:image/svg+xml,%3csvg%20width='25'%20height='24'%20viewBox='0%200%2025%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M18.69%2017.75H8.03999C7.04999%2017.75%206.09999%2017.33%205.42999%2016.6C4.75999%2015.87%204.42%2014.89%204.5%2013.9L5.33%203.94C5.36%203.63%205.24999%203.33001%205.03999%203.10001C4.82999%202.87001%204.54%202.75%204.23%202.75H2.5C2.09%202.75%201.75%202.41%201.75%202C1.75%201.59%202.09%201.25%202.5%201.25H4.24001C4.97001%201.25%205.65999%201.56%206.14999%202.09C6.41999%202.39%206.62%202.74%206.73%203.13H19.22C20.23%203.13%2021.16%203.53%2021.84%204.25C22.51%204.98%2022.85%205.93%2022.77%206.94L22.23%2014.44C22.12%2016.27%2020.52%2017.75%2018.69%2017.75ZM6.78%204.62L6%2014.02C5.95%2014.6%206.14%2015.15%206.53%2015.58C6.92%2016.01%207.45999%2016.24%208.03999%2016.24H18.69C19.73%2016.24%2020.67%2015.36%2020.75%2014.32L21.29%206.82001C21.33%206.23001%2021.14%205.67001%2020.75%205.26001C20.36%204.84001%2019.82%204.60999%2019.23%204.60999H6.78V4.62Z'%20fill='white'/%3e%3cpath%20d='M16.75%2022.75C15.65%2022.75%2014.75%2021.85%2014.75%2020.75C14.75%2019.65%2015.65%2018.75%2016.75%2018.75C17.85%2018.75%2018.75%2019.65%2018.75%2020.75C18.75%2021.85%2017.85%2022.75%2016.75%2022.75ZM16.75%2020.25C16.47%2020.25%2016.25%2020.47%2016.25%2020.75C16.25%2021.03%2016.47%2021.25%2016.75%2021.25C17.03%2021.25%2017.25%2021.03%2017.25%2020.75C17.25%2020.47%2017.03%2020.25%2016.75%2020.25Z'%20fill='white'/%3e%3cpath%20d='M8.75%2022.75C7.65%2022.75%206.75%2021.85%206.75%2020.75C6.75%2019.65%207.65%2018.75%208.75%2018.75C9.85%2018.75%2010.75%2019.65%2010.75%2020.75C10.75%2021.85%209.85%2022.75%208.75%2022.75ZM8.75%2020.25C8.47%2020.25%208.25%2020.47%208.25%2020.75C8.25%2021.03%208.47%2021.25%208.75%2021.25C9.03%2021.25%209.25%2021.03%209.25%2020.75C9.25%2020.47%209.03%2020.25%208.75%2020.25Z'%20fill='white'/%3e%3cpath%20d='M21.5%208.75H9.5C9.09%208.75%208.75%208.41%208.75%208C8.75%207.59%209.09%207.25%209.5%207.25H21.5C21.91%207.25%2022.25%207.59%2022.25%208C22.25%208.41%2021.91%208.75%2021.5%208.75Z'%20fill='white'/%3e%3c/svg%3e",bt=({product:e,isDescriptionShort:t,setIsDescriptionShort:i})=>{const a=nt(),[o,c]=u.useState(1),[m,b]=u.useState(!1),[r,S]=u.useState(null),[h,G]=u.useState(null),{isScreenMobile:A,setFooterFade:M}=Re(),{isLoggedIn:w}=ot(),{getWishlistSvg:P}=it(),{y:N}=gt();let V;u.useEffect(()=>{(e==null?void 0:e.description.length)>100?i(!0):i(!1)},[e,i]),Ve(()=>{S((Math.random()*5+0).toFixed(1)),G(Math.floor(Math.random()*1e3+0))});const E=f=>(["[","]",'"'].forEach(k=>{f&&(f=f.replaceAll(k,""))}),f),p={...e,image:e.image||E(e.images[0])},C={...p,quantity:o};u.useEffect(()=>{m?a.submit({intent:"add to favorite",product:JSON.stringify(C)},{method:"patch"}):a.submit({intent:"remove item from favorite",itemId:C.id},{method:"delete"})},[m]),u.useEffect(()=>{M(!!t)},[t,M]),t?V=e.description.slice(0,100)+" ...":V=e.description,u.useEffect(()=>{A&&N===0&&!t&&i(!0)},[t,A,i,N]);const B=f=>{f==="+"?c(k=>k+1):f==="-"&&o>1&&c(k=>k-1)};return n.jsxs(n.Fragment,{children:[n.jsxs("main",{className:"product pt-6 pt-lg-4 w-100 d-flex flex-column flex-lg-row gap-3",children:[n.jsx("div",{className:"product__image d-flex position-sticky justify-content-center d-lg-block",children:n.jsx("img",{src:p.image,alt:p.title})}),n.jsxs("div",{className:"product__detail bg-light d-flex flex-column justify-content-lg-around position-relative p-3 rounded-4",children:[w&&n.jsx(L,{variant:"white",className:"product__detail--favorite position-absolute border-0",onClick:()=>{b(f=>!f)},children:P("#000",m)}),n.jsxs("div",{className:"product__detail-start d-flex justify-content-between align-items-center",children:[n.jsx("h1",{className:"h4 w-75 m-0 fw-bold",children:p.title}),n.jsxs("p",{className:"fw-bold m-0",children:["$ ",p.price]})]}),n.jsxs("div",{className:"product__detail-middle",children:[n.jsxs("div",{className:"product__detail-testimonials d-flex gap-1 align-items-center",children:[n.jsx(Fe,{iconsCount:5,initialValue:p.rating?p.rating.rate:r,readonly:!0,allowFraction:!0,size:15,showTooltip:!0,tooltipClassName:"bg-white text-dark ms-1 small"}),n.jsxs("span",{className:"small",children:["(",p.rating?p.rating.count:h," ","reviews)"]})]}),n.jsxs("p",{className:"product__detail-description fw-light",children:[V," ",n.jsx(L,{variant:"white",className:"p-0 text-primary",onClick:()=>{i(f=>!f)},children:t?"Read More":"Read Less"})]}),n.jsx(ct,{className:"product__detail-toolbar justify-content-between",children:n.jsxs(dt,{className:"product__detail-group align-items-center small",children:[n.jsx(L,{onClick:()=>{B("-")},"data-action":"-",className:"bg-white",children:"-"}),n.jsx("span",{className:"h-100 d-flex align-items-center bg-white",children:o}),n.jsx(L,{onClick:()=>{B("+")},"data-action":"+",className:"bg-white",children:"+"})]})})]}),w&&n.jsxs("div",{className:"d-flex",children:[n.jsx(at,{className:"btn btn-white w-50 fw-bold py-3 rounded-3",children:"Buy Now"}),n.jsxs(L,{variant:"dark fw-bold",className:"w-50 d-flex align-items-center justify-content-center py-3 rounded-3",type:"submit",onClick:()=>{a.submit({intent:"add to cart",product:JSON.stringify(C)},{method:"patch"})},children:[n.jsx("span",{children:"Add to Cart"}),n.jsx("img",{src:_t,alt:"cart"})]})]})]})]}),a.state==="submitting"&&n.jsx(Ie,{})]})},St=()=>{const e=st(),[t,i]=u.useState(!0),{renderFooter:a,renderHeader:o}=Re();return console.log("success branch test"),n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"pb-7 pb-lg-2",children:n.jsxs(rt,{className:"mt-3 mt-lg-0",children:[o("Product Details",".."),n.jsx(u.Suspense,{fallback:n.jsx(Ie,{}),children:n.jsx(lt,{resolve:e.product,children:c=>n.jsx(bt,{product:c,isDescriptionShort:t,setIsDescriptionShort:i})})})]})}),t&&a]})};export{St as default};
